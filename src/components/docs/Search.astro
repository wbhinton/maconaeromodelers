---
// Get the base URL (e.g., "/maconaeromodelers/")
const base = import.meta.env.BASE_URL.endsWith('/') 
  ? import.meta.env.BASE_URL 
  : `${import.meta.env.BASE_URL}/`;
---

<div id="search" class="ml-2 mr-2 mb-6 min-h-[50px]"></div>

<link href={`${base}pagefind/pagefind-ui.css`} rel="stylesheet">
<script src={`${base}pagefind/pagefind-ui.js`} is:inline></script>

<script define:vars={{ base }}>
  window.addEventListener('DOMContentLoaded', (event) => {
    // Check if the library loaded successfully
    if (typeof PagefindUI !== 'undefined') {
      new PagefindUI({ 
        element: "#search", 
        showSubResults: true,
        showImages: false,
        // CRITICAL: Tell Pagefind where to look for the index files
        bundlePath: `${base}pagefind/`
      });
    } else {
      console.error("Pagefind script failed to load. Did you run 'npm run build'?");
    }
  });
</script>

<style is:global>
  :root {
    --pagefind-ui-scale: 0.8;
    --pagefind-ui-primary: #1e40af;
    --pagefind-ui-text: #374151;
    --pagefind-ui-background: #ffffff;
    --pagefind-ui-border: #e5e7eb;
    --pagefind-ui-tag: #f3f4f6;
    --pagefind-ui-border-width: 1px;
    --pagefind-ui-border-radius: 0.5rem;
    --pagefind-ui-font: sans-serif;
  }
  
  .pagefind-ui__footer {
    display: none;
  }
</style>