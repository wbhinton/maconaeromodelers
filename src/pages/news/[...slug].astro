---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const blogEntries = await getCollection('news');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();

// 1. Get the Base URL
const baseUrl = import.meta.env.BASE_URL;
---

<Layout title={entry.data.title} description={entry.data.description}>
  
  <div class="mb-6">
    <a href={`${baseUrl}news`} class="text-primary hover:underline font-medium">
      ← Back to News
    </a>
  </div>

  <header class="mb-8 border-b border-gray-200 pb-8">
    <h1 class="text-3xl md:text-4xl font-bold text-text-dark mb-4">{entry.data.title}</h1>
    <div class="flex items-center gap-4 text-gray-500 text-sm md:text-base">
      <time datetime={entry.data.date.toISOString()}>
        {entry.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
      </time>
      <span>•</span>
      <span>By {entry.data.author}</span>
    </div>
  </header>

  <article class="prose prose-lg prose-slate max-w-none prose-headings:text-primary prose-a:text-primary prose-img:rounded-xl">
    <Content />
  </article>

</Layout>